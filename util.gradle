def gitRevision() {
    'git rev-parse HEAD'.execute().text.trim()
}

def processArguments(String optionValue) {
    def arguments = new ArrayList<String>()

    def tempString = ""
    def ignoreWhiteSpace = false

    for (int i = 0; i < optionValue.length(); i++) {
        def c = optionValue.charAt(i)

        if (c == '"' && !ignoreWhiteSpace) {
            ignoreWhiteSpace = true
            continue
        } else if (c == '"' && ignoreWhiteSpace) {
            ignoreWhiteSpace = false
            continue
        }

        if (c == ' ' && !ignoreWhiteSpace) {
            arguments.add(tempString)
            tempString = ""
        } else {
            tempString += c
        }
    }
    arguments.add(tempString)
    return arguments.toArray(new String[arguments.size()])
}

ext {
    gitRevision = this.&gitRevision
    processArguments = this.&processArguments
}
